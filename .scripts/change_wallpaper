#!/usr/bin/env bash
set -euo pipefail

killall mpvpaper || true

wallpapers_dir="$HOME/Wallpapers"
wallpaper=$(find "$wallpapers_dir" -type f -not -name '.*' | shuf -n 1)
if [ -z "$wallpaper" ]; then
	echo "change_wallpaper: no wallpapers found in $wallpapers_dir" >&2
	exit 1
fi

mpvpaper -vspf -o "no-audio --loop-file=inf --video-aspect-override=16:9" '*' "$wallpaper"
